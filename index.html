<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>VicVern Game Chooser</title>
    <style>
        #gameiframe {
            width: 95%;
            height: 888px
        }

        #dropdownme {
            width: 60%;
            font-size: 1em;
        }

        #chooser {
            font-size: 1.5em;
        }

        #toptitle {
            text-align: center;
        }

        #feedbackiframe {
            width: 95%;
            height: 888px
        }
    </style>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <script>
        function loadForm(id) {
            console.log(id)
            document.getElementById('feedbackBtn').myData = id;
            document.getElementById('feedbackiframe').src = 'about:blank';

        }

        function openForm(id) {
            if (!(id == undefined || id == null)){
            var formUrl = 'https://docs.google.com/forms/d/e/1FAIpQLScJpjZSbbeILSUnNb3sv6EOo4mxZ9yB69PktvPFBtK8UZfemQ/viewform?usp=pp_url&entry.1346543945=' + encodeURI(id);
            document.getElementById('feedbackiframe').src = formUrl;
            }
        }

        function loadGame(url, title) {
            document.getElementById('gameiframe').src = url;
            document.getElementById('gameiframe').focus();
            document.getElementById('gametitle').innerHTML = title;
        }
    </script>

</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <h1 id="toptitle">VicVern Game Catalogue</h1>
            </div>

        </div>
        <div class="row">
            <div class="col">
                <form name="change">
                    <div id="chooser"><span>Game: </span>
                        <SELECT ID="dropdownme" NAME="options" ONCHANGE="loadForm(this.options[this.selectedIndex].getAttribute('mydata')); loadGame(this.options[this.selectedIndex].value, this.options[this.selectedIndex].text);">
                            <option value="cover.html">CHOOSE A GAME!</option>
                           <!-- JQuery Ajax will append from Google Spreadsheet TSV here -->
                        </SELECT>
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <h1 id="gametitle"></h1>
        </div>
        <div class="row">
            <div id="gamediv" class="col-lg-9 col-md-8"><iframe name="gameiframe" id="gameiframe" src="cover.html"></iframe>
            </div>
            <div id="feedbackformdiv" class="col-lg-3 col-md-4">
                <div class="row">
                    <div class="col"><button id="feedbackBtn" myData="" onclick="openForm(this.myData)">Give Feedback!</button></div>
                </div>
                <div class="row">
                    <div class="col"><iframe name="feedbackiframe" id="feedbackiframe" src=""></iframe></div>
                </div>
            </div>
        </div>
        <textarea id="test"></textarea>


    </div>
    <script>
        $(document).ready(function() {
            var content;
            $.ajax({
                url: "https://docs.google.com/spreadsheets/d/e/2PACX-1vRWUNRlOSI-0IVK9A5t8jig4W0BqrpqQMGYLeUOW4vAOGn1f_8Sze6wWOEaNpVSfjHMHl4SvUnt2wpj/pub?gid=1241468836&single=true&output=tsv",
                type: "GET",
                contentType: "html",
                async: false,
                success: function(text) {
                    $('#dropdownme').append(text);
                    
                }
            });
            
        });
    </script>
</body>

</html>